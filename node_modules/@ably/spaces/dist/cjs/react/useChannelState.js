"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useChannelState = void 0;
const react_1 = require("react");
const useEventListener_js_1 = require("./useEventListener.js");
const failedStateEvents = ['suspended', 'failed', 'detached'];
const successStateEvents = ['attached'];
/**
 * todo use `ably/react` hooks instead
 */
const useChannelState = (emitter) => {
    const [channelError, setChannelError] = (0, react_1.useState)(null);
    (0, useEventListener_js_1.useEventListener)(emitter, (stateChange) => {
        if (stateChange.reason) {
            setChannelError(stateChange.reason);
        }
    }, failedStateEvents);
    (0, useEventListener_js_1.useEventListener)(emitter, () => {
        setChannelError(null);
    }, successStateEvents);
    return channelError;
};
exports.useChannelState = useChannelState;
//# sourceMappingURL=useChannelState.js.map